(this["webpackJsonprancid-tomatillos"]=this["webpackJsonprancid-tomatillos"]||[]).push([[0],{28:function(e,t,n){},30:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),i=n.n(r),s=n(20),a=n.n(s),o=(n(28),n(16)),l=n.n(o),j=n(21),u=n(10),b=n(11),d=n(13),h=n(12),m=n(2),v=n(7),x=(n(30),function(e){var t=e.title,n=e.src,r=e.alt,i=e.rating,s=e.id,a=e.getSingleMovie;return Object(c.jsx)(v.b,{to:"/".concat(s),children:Object(c.jsxs)("section",{id:s,className:"card",onClick:function(){return a(s)},children:[Object(c.jsx)("img",{className:"card-img",src:n,alt:r}),Object(c.jsx)("p",{children:t}),Object(c.jsxs)("p",{children:["Average Rating: ",i.toFixed(2)]})]})})}),O=(n(36),function(e){var t=e.movies,n=e.getSingleMovie,r=t.map((function(e){return Object(c.jsx)(x,{title:e.title,src:e.poster_path,alt:e.title,rating:e.average_rating,id:e.id,getSingleMovie:n},e.id)}));return Object(c.jsx)("section",{children:Object(c.jsx)("section",{className:"movie-container",children:r})})}),f=(n(37),function(e){var t=e.label,n=e.body;return Object(c.jsxs)("section",{className:"details-box",children:[Object(c.jsx)("p",{className:"l-details",children:Object(c.jsx)("b",{children:t})}),Object(c.jsx)("p",{className:"r-details",children:n})]})}),g=(n(38),function(e){var t=e.movie,n=(e.movieTrailers,e.resetState),i=e.getSingleMovie,s=+window.location.pathname.slice(19);Object(r.useEffect)((function(){s!==+t.id&&i(s)}));var a,o=function(e,t){return e>0&&Object(c.jsx)(f,{label:t,body:"$".concat(new Intl.NumberFormat("en-US").format(e))})};return Object(c.jsxs)("section",{children:[Object(c.jsx)("nav",{children:Object(c.jsx)(v.b,{to:"/",onClick:function(){return n()},children:Object(c.jsx)("button",{className:"all-movies",children:"All Movies"})})}),Object(c.jsx)("section",{className:"banner-container",children:Object(c.jsx)("img",{className:"card-img banner-img",src:t.backdrop_path,alt:"".concat(t.title," banner")})}),Object(c.jsxs)("section",{className:"container",children:[Object(c.jsx)("section",{className:"side-panel"}),Object(c.jsx)("section",{className:"center-panel",children:Object(c.jsxs)("section",{className:"movie-details-box",children:[Object(c.jsxs)("section",{className:"up-first",children:[Object(c.jsx)("img",{className:"card-img poster",src:t.poster_path,alt:"".concat(t.title," poster")}),Object(c.jsxs)("section",{className:"poster-aside",children:[Object(c.jsx)("p",{className:"movie-title",children:Object(c.jsx)("b",{children:t.title})}),Object(c.jsxs)("section",{className:"ratings-box",children:[Object(c.jsx)("p",{className:"user-rating-title",children:Object(c.jsx)("b",{children:"Average User Rating:"})}),Object(c.jsxs)("p",{className:"rating",children:[t.average_rating.toFixed(2)," /10"]}),Object(c.jsx)("p",{className:"rating-emoji",children:(a=t.average_rating,a<4?"\ud83e\udd22":a<6?"\ud83d\udc4c":a<9?"\ud83d\udc4d":"\ud83e\udd29")})]})]})]}),Object(c.jsxs)("section",{className:"overview-box",children:[Object(c.jsx)("p",{className:"overview-title",children:Object(c.jsx)("b",{children:"Movie Info:"})}),Object(c.jsx)("p",{className:"overview-text",children:t.overview})]}),Object(c.jsx)(f,{label:"Genre:",body:function(e){if(e.genres){if(e.genres.length>1){var t=e.genres.reduce((function(e,t){return e+=" | "+t}),"");return t.slice(3,t.length)}return e.genres[0]}return"Unavailable"}(t)}),Object(c.jsx)(f,{label:"Release Date:",body:t.release_date}),o(t.budget,"Budget"),o(t.revenue,"Total Revenue"),Object(c.jsx)(f,{label:"Runtime:",body:t.runtime})]})}),Object(c.jsx)("section",{className:"side-panel"})]})]})}),p=(n(39),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(u.a)(this,n),(c=t.call(this,e)).state={hasError:!1},c}return Object(b.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e=this;return this.state.hasError?Object(c.jsxs)("section",{children:[Object(c.jsx)("h2",{children:"Something went wrong."}),Object(c.jsx)(v.b,{to:"/",children:Object(c.jsx)("button",{className:"all-movies",onClick:function(){e.setState({hasError:!1})},children:"Back to All Movies"})})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(r.Component)),N=(n(40),function(e){return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies/".concat(+e)).then((function(e){if(!e.ok)throw Error("Sorry! We've encountered an error");return e.json()}))}),S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).componentDidMount=function(){return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies").then((function(e){if(!e.ok)throw Error("Sorry! We've encountered an error");return e.json()})).then((function(t){"/rancid-tomatillos/"===window.location.pathname&&e.setState({movies:t.movies})})).then((function(){"/rancid-tomatillos/"!==window.location.pathname&&e.getSingleMovie(+window.location.pathname.slice(19))})).catch((function(t){return e.setState({error:t.message})}))},e.getSingleMovie=function(){var t=Object(j.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(n).then((function(t){e.setState({movie:t.movie})})).catch((function(t){return e.setState({error:t.message})}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getMovieTrailers=function(t){(function(e){return fetch("https://rancid-tomatillos.herokuapp.com/api/v2/movies/".concat(+e,"/videos")).then((function(e){return e.json()}))})(t).then((function(t){return e.setState({movieTrailers:t.videos})})).catch((function(e){return console.log(e)}))},e.resetState=function(){e.setState({movie:null,movieTrailers:[]})},e.state={movies:[],movie:null,error:"",movieTrailers:[]},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(c.jsxs)("main",{className:"App",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h1",{children:"Rancid Tomatillos"})}),Object(c.jsxs)(m.c,{children:[Object(c.jsx)(m.a,{exact:!0,path:"/",render:function(){return Object(c.jsx)(p,{children:Object(c.jsx)(O,{movies:e.state.movies,getSingleMovie:e.getSingleMovie})})}}),Object(c.jsx)(m.a,{exact:!0,path:"/:id",render:function(){return e.state.movie?e.state.movie?Object(c.jsx)(p,{children:Object(c.jsx)(g,{movie:e.state.movie,resetState:e.resetState,getSingleMovie:e.getSingleMovie})}):void 0:Object(c.jsxs)("section",{children:[Object(c.jsx)("h2",{children:"Whoops, it looks like something went wrong. Try refreshing the page or return to all movies."}),Object(c.jsx)(v.b,{to:"/",onClick:function(){return e.resetState()},children:Object(c.jsx)("button",{className:"back",children:"Back to Movies"})})]})}})]})]})}}]),n}(r.Component);a.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(v.a,{basename:"/rancid-tomatillos/",children:Object(c.jsx)(S,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.1806adbf.chunk.js.map